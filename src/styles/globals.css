@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Dark theme by default */
    --background: 24 24 27;
    --foreground: 244 244 245;

    --muted: 39 39 42;
    --muted-foreground: 161 161 170;

    --border: 63 63 70;
    --input: 63 63 70;
    --ring: 161 161 170;
    --ring-offset: 24 24 27;

    --primary: 244 244 245;
    --primary-foreground: 24 24 27;

    --secondary: 39 39 42;
    --secondary-foreground: 244 244 245;

    --destructive: 239 68 68;
    --destructive-foreground: 244 244 245;

    --accent: 39 39 42;
    --accent-foreground: 244 244 245;

    --radius: 0.5rem;

    /* Semantic colors */
    --success: 34 197 94;
    --success-foreground: 255 255 255;
    --warning: 234 179 8;
    --warning-foreground: 24 24 27;
    --info: 59 130 246;
    --info-foreground: 255 255 255;
    --error: 239 68 68;
    --error-foreground: 255 255 255;

    /* Surface layers (depth hierarchy) */
    --surface-0: 24 24 27;
    --surface-1: 39 39 42;
    --surface-2: 52 52 56;

    /* Card/Popover (solid backgrounds, no glassmorphism) */
    --card: 39 39 42;
    --card-foreground: 244 244 245;
    --popover: 39 39 42;
    --popover-foreground: 244 244 245;

    /* Status colors */
    --status-todo: 161 161 170;
    --status-inprogress: 59 130 246;
    --status-inreview: 168 85 247;
    --status-done: 34 197 94;
    --status-cancelled: 239 68 68;
  }

  .light {
    --background: 255 255 255;
    --foreground: 24 24 27;

    --muted: 244 244 245;
    --muted-foreground: 113 113 122;

    --border: 228 228 231;
    --input: 228 228 231;
    --ring: 113 113 122;
    --ring-offset: 255 255 255;

    --primary: 24 24 27;
    --primary-foreground: 244 244 245;

    --secondary: 244 244 245;
    --secondary-foreground: 24 24 27;

    --destructive: 220 38 38;
    --destructive-foreground: 244 244 245;

    --accent: 244 244 245;
    --accent-foreground: 24 24 27;

    /* Semantic colors */
    --success: 22 163 74;
    --success-foreground: 255 255 255;
    --warning: 202 138 4;
    --warning-foreground: 255 255 255;
    --info: 37 99 235;
    --info-foreground: 255 255 255;
    --error: 220 38 38;
    --error-foreground: 255 255 255;

    /* Surface layers (depth hierarchy) */
    --surface-0: 255 255 255;
    --surface-1: 244 244 245;
    --surface-2: 228 228 231;

    /* Card/Popover (solid backgrounds, no glassmorphism) */
    --card: 255 255 255;
    --card-foreground: 24 24 27;
    --popover: 255 255 255;
    --popover-foreground: 24 24 27;
  }

  * {
    border-color: rgb(var(--border));
  }

  body {
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Disable text selection on draggable elements */
  [data-tauri-drag-region] {
    user-select: none;
    -webkit-user-select: none;
  }
}

@layer utilities {
  /* Responsive typography - scales with viewport */
  .text-page-title {
    @apply text-xl font-bold md:text-2xl;
  }

  .text-section-title {
    @apply text-lg font-semibold md:text-xl;
  }

  .text-card-title {
    @apply text-base font-medium md:text-lg;
  }

  /* Responsive container padding - tighter on mobile */
  .container-responsive {
    @apply px-4 md:px-6;
  }

  /* Reduced motion support - respects user preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Standardized focus ring for all interactive elements */
  .focus-ring {
    @apply focus-visible:outline-none
           focus-visible:ring-2
           focus-visible:ring-ring
           focus-visible:ring-offset-2
           focus-visible:ring-offset-background;
  }

  /* Focus ring without offset (for elements on colored backgrounds) */
  .focus-ring-inset {
    @apply focus-visible:outline-none
           focus-visible:ring-2
           focus-visible:ring-ring
           focus-visible:ring-inset;
  }

  /* Accessibility: solid backgrounds for users who prefer reduced transparency */
  /* biome-ignore lint/correctness/noUnknownMediaFeatureName: CSS4 Media Query - experimental but valid for future compatibility */
  @media (prefers-reduced-transparency: reduce) {
    .glass-fallback {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  }

  /* Scrollbar styling for dark mode */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--muted)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(var(--muted));
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--muted-foreground));
  }

  /* Touch target utilities for accessibility (WCAG 2.5.5/2.5.8) */
  /* Minimum 44x44px touch target for coarse pointer devices */

  /* Touch target base class - always meets 44px minimum */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Touch target only for height (text buttons, list items) */
  .touch-target-y {
    min-height: 44px;
  }

  /* Touch target only for width (icon buttons) */
  .touch-target-x {
    min-width: 44px;
  }

  /* Responsive touch target - 44px on touch devices, normal on pointer devices */
  @media (pointer: coarse) {
    .touch-coarse\:min-h-11 {
      min-height: 44px;
    }
    .touch-coarse\:min-w-11 {
      min-width: 44px;
    }
    .touch-coarse\:py-3 {
      padding-top: 12px;
      padding-bottom: 12px;
    }
    .touch-coarse\:px-3 {
      padding-left: 12px;
      padding-right: 12px;
    }
  }
}
