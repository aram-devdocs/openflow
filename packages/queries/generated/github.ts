// =============================================================================
// AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
// =============================================================================
//
// Generated by: scripts/generate-queries.ts
// Source: crates/openflow-contracts/src/endpoints/mod.rs
// Domain: github
// Generated at: 2026-01-03T02:06:04.724Z
//
// This file contains type-safe query functions for the github domain.
// Each function wraps a Tauri IPC command with validation and logging.
//
// To regenerate: pnpm generate:queries
//
// @see CLAUDE.md - Query Layer Patterns section
// =============================================================================

import type {
  AuthStatusResponse,
  CliInstalledResponse,
  CreatePullRequestRequest,
  PullRequestResult,
} from '@openflow/generated';
import { createLogger } from '@openflow/utils';
import { createPullRequestRequestSchema } from '@openflow/validation';
import { invoke } from '../utils.js';

const logger = createLogger('queries:github:generated');

/**
 * Check GitHub CLI authentication status
 *
 * @endpoint GET /api/github/cli/auth
 * @command check_gh_auth_status
 * @returns Promise resolving to AuthStatusResponse
 * @throws Error if validation or query fails
 */
export async function checkGhAuthStatus(): Promise<AuthStatusResponse> {
  logger.debug('Calling check_gh_auth_status');

  try {
    const result = await invoke<AuthStatusResponse>('check_gh_auth_status');

    logger.info('check_gh_auth_status completed', {
      id: (result as unknown as Record<string, unknown>).id,
    });

    return result;
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    logger.error('check_gh_auth_status failed', { error: errorMessage });
    throw error;
  }
}

/**
 * Check if GitHub CLI is installed
 *
 * @endpoint GET /api/github/cli/installed
 * @command check_gh_cli_installed
 * @returns Promise resolving to CliInstalledResponse
 * @throws Error if validation or query fails
 */
export async function checkGhCliInstalled(): Promise<CliInstalledResponse> {
  logger.debug('Calling check_gh_cli_installed');

  try {
    const result = await invoke<CliInstalledResponse>('check_gh_cli_installed');

    logger.info('check_gh_cli_installed completed', {
      id: (result as unknown as Record<string, unknown>).id,
    });

    return result;
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    logger.error('check_gh_cli_installed failed', { error: errorMessage });
    throw error;
  }
}

/**
 * Create a GitHub pull request
 *
 * @endpoint POST /api/github/pr
 * @command create_pull_request
 * @param request - Request body (validated with Zod)
 * @returns Promise resolving to PullRequestResult
 * @throws Error if validation or query fails
 */
export async function createPullRequest(
  request: CreatePullRequestRequest
): Promise<PullRequestResult> {
  logger.debug('Calling create_pull_request');

  try {
    const validated = createPullRequestRequestSchema.parse(request);
    const result = await invoke<PullRequestResult>('create_pull_request', { request: validated });

    logger.info('create_pull_request completed', {
      id: (result as unknown as Record<string, unknown>).id,
    });

    return result;
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    logger.error('create_pull_request failed', { error: errorMessage });
    throw error;
  }
}
