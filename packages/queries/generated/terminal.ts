// =============================================================================
// AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
// =============================================================================
//
// Generated by: scripts/generate-queries.ts
// Source: crates/openflow-contracts/src/endpoints/mod.rs
// Domain: terminal
// Generated at: 2026-01-02T16:30:55.302Z
//
// This file contains type-safe query functions for the terminal domain.
// Each function wraps a Tauri IPC command with validation and logging.
//
// To regenerate: pnpm generate:queries
//
// @see CLAUDE.md - Query Layer Patterns section
// =============================================================================

import type { ExecutionProcess } from '@openflow/generated';
import { createLogger } from '@openflow/utils';
import { invoke } from '../utils.js';

const logger = createLogger('queries:terminal:generated');

/**
 * Spawn a new terminal session
 *
 * @endpoint POST /api/terminal/spawn
 * @command spawn_terminal
 * @param chatId - Query parameter: chat_id (optional)
 * @param workingDir - Query parameter: working_dir (optional)
 * @returns Promise resolving to ExecutionProcess
 * @throws Error if validation or query fails
 */
export async function spawnTerminal(chatId?: string, workingDir?: string): Promise<ExecutionProcess> {
  logger.debug('Calling spawn_terminal');

  try {
    const result = await invoke<ExecutionProcess>('spawn_terminal', { chat_id: chatId, working_dir: workingDir });

    logger.info('spawn_terminal completed', { id: (result as unknown as Record<string, unknown>).id });

    return result;
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    logger.error('spawn_terminal failed', { error: errorMessage });
    throw error;
  }
}
